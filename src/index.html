<html>
<head>
<script>
const PIXI = require('pixi.js');
</script>
<meta charset="UTF-8">
<title>タイトル</title>
</head>
<body>
<h1>Sample</h1>
<script>
let app = new PIXI.Application({ 
    width: 256, 
    height: 256,                       
    antialias: true, 
    transparent: false, 
    resolution: 1
  }
);

document.body.appendChild(app.view);

class ChartTick {
  constructor(opt) {
    this.dt    = opt.dt;
    this.low   = opt.l;
    this.hight = opt.h;
    this.start = opt.s;
    this.end   = opt.e;

    this.x = 0;
    this.y = 0;
    this.width = 2;
    this.height = 0;

    this.sprite = new PIXI.Graphics();

  }

  getSprite() {
    //rectangle.lineStyle(4, 0xFF3300, 1);
    this.sprite.beginFill(0x66CCFF);
    this.sprite.drawRect(0, 0, this.width, this.height);
    this.sprite.endFill();
    this.sprite.x = this.x;
    this.sprite.y = this.y;
    return this.sprite;
  }
}

class ChartContainer {
  constructor(opt) {
    this.ChartTick = [];
  }
  
  addChartTick(ct) {
    this.ChartTick.push(ct);
  }

  setPosition() {
    let vx = 200;
    this.ChartTick.forEach(function(obj){
      obj.x = vx;
      obj.y = 50
      obj.width = 2;
      obj.height = 50

      vx -= obj.width + 2;
    });
  }

  setup(pixiSurface) {
    let rectangle = new PIXI.Graphics();
    //rectangle.lineStyle(4, 0xFF3300, 1);
    rectangle.beginFill(0x66CCFF);
    rectangle.drawRect(0, 0, 30, 30);
    rectangle.endFill();
    rectangle.x = 50;
    rectangle.y = 50;
    surface.addChild(rectangle);

    this.setPosition();
    console.log(this.ChartTick);
    this.ChartTick.forEach(function(obj){
      pixiSurface.addChild(obj.getSprite());
    });
  }
}

var chartContainer = new ChartContainer();
chartContainer.addChartTick(new ChartTick({dt:new Date(),l:1,h:2,s:3,e:4}));
chartContainer.addChartTick(new ChartTick({dt:new Date(),l:5,h:6,s:7,e:8}));
console.log(chartContainer);

PIXI.loader
  .add("img/test.png")
  .load(setup);

function setup() {
  //Create the cat sprite
  let cat = new PIXI.Sprite(PIXI.loader.resources["img/test.png"].texture);

  chartContainer.setup(app.stage);

  //Add the cat to the stage
  app.stage.addChild(cat);

}


</script>
</body>
</html>